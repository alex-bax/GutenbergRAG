{"testRunData": {"testFile": ".\\tests\\test_llm.py", "testCases": [{"name": "test_gutenberg_rag_answer_relevancy[test_case0]", "input": "Who is the captain obsessed with hunting the white whale?", "actualOutput": "Captain Ahab.\n\nSources: [chunk_nr: 1389] Moby Dick; Or, The Whale; [chunk_nr: 1414] Moby Dick; Or, The Whale; [chunk_nr: 1390] Moby Dick; Or, The Whale; [chunk_nr: 1391] Moby Dick; Or, The Whale", "expectedOutput": "Captain Ahab", "retrievalContext": ["His three boats stove around him, and oars and men both whirling in the\neddies; one captain, seizing the line-knife from his broken prow, had\ndashed at the whale, as an Arkansas duellist at his foe, blindly\nseeking with a six inch blade to reach the fathom-deep life of the\nwhale. That captain was Ahab. And then it was, that suddenly sweeping", "him, Ahab had purposely sailed upon the present voyage with the one\nonly and all-engrossing object of hunting the White Whale. Had any one\nof his old acquaintances on shore but half dreamed of what was lurking\nin him then, how soon would their aghast and righteous souls have\nwrenched the ship from such a fiendish man! They were bent on", "whale. That captain was Ahab. And then it was, that suddenly sweeping\nhis sickle-shaped lower jaw beneath him, Moby Dick had reaped away\nAhab\u2019s leg, as a mower a blade of grass in the field. No turbaned Turk,\nno hired Venetian or Malay, could have smote him with more seeming\nmalice. Small reason was there to doubt, then, that ever since that", "malice. Small reason was there to doubt, then, that ever since that\nalmost fatal encounter, Ahab had cherished a wild vindictiveness\nagainst the whale, all the more fell for that in his frantic morbidness\nhe at last came to identify with him, not only all his bodily woes, but\nall his intellectual and spiritual exasperations. The White Whale swam"], "success": false, "metricsData": [{"name": "Contextual Precision", "threshold": 0.675, "success": true, "score": 1.0, "reason": "The score is 1.00 because all top retrieval contexts clearly support the answer and there are no irrelevant nodes ranked above relevant ones: Node 1 says \"It states 'That captain was Ahab' which directly identifies the captain in question.\"; Node 2 says \"It shows that 'Ahab had purposely sailed upon the present voyage with the one only and all-engrossing object of hunting the White Whale,' linking the captain to the hunt.\"; Node 3 says \"It includes 'That captain was Ahab' and discusses his entanglement with the White Whale, confirming the focus on Ahab.\"; Node 4 says \"It indicates that 'Ahab had cherished a wild vindictiveness against the whale,' reinforcing the obsession with the White Whale.\"} }```))}", "strictMode": false, "evaluationModel": "Azure OpenAI (gpt-5-nano)", "evaluationCost": 0.0017327500000000001, "verboseLogs": "Verdicts:\n[\n    {\n        \"verdict\": \"yes\",\n        \"reason\": \"It states 'That captain was Ahab' which directly identifies the captain in question.\"\n    },\n    {\n        \"verdict\": \"yes\",\n        \"reason\": \"It shows that 'Ahab had purposely sailed upon the present voyage with the one only and all-engrossing object of hunting the White Whale,' linking the captain to the hunt.\"\n    },\n    {\n        \"verdict\": \"yes\",\n        \"reason\": \"It includes 'That captain was Ahab' and discusses his entanglement with the White Whale, confirming the focus on Ahab.\"\n    },\n    {\n        \"verdict\": \"yes\",\n        \"reason\": \"It indicates that 'Ahab had cherished a wild vindictiveness against the whale,' reinforcing the obsession with the White Whale.\"\n    }\n]"}, {"name": "Contextual Relevancy", "threshold": 0.675, "success": false, "score": 0.25, "reason": "The score is 0.25 because the irrelevancy quotes ('His three boats stove around him, and oars and men both whirling in the eddies' and 'The White Whale swam') do not identify who hunts the white whale, while the relevant lines clearly name the hunter: 'That captain was Ahab.' and 'Ahab had purposely sailed upon the present voyage with the one only and all-engrossing object of hunting the White Whale.'", "strictMode": false, "evaluationModel": "Azure OpenAI (gpt-5-nano)", "evaluationCost": 0.00392375, "verboseLogs": "Verdicts:\n[\n    {\n        \"verdicts\": [\n            {\n                \"statement\": \"His three boats stove around him, and oars and men both whirling in the eddies.\",\n                \"verdict\": \"no\",\n                \"reason\": \"The retrieval context contained the information 'His three boats stove around him, and oars and men both whirling in the eddies' when it has nothing to do with who hunts the white whale.\"\n            },\n            {\n                \"statement\": \"one captain, seizing the line-knife from his broken prow, had dashed at the whale, as an Arkansas duellist at his foe, blindly seeking with a six inch blade to reach the fathom-deep life of the whale.\",\n                \"verdict\": \"yes},{\",\n                \"reason\": \"\"\n            },\n            {\n                \"statement\": \"That captain was Ahab.\",\n                \"verdict\": \"yes}]}to the final JSON form with proper structure.{\",\n                \"reason\": \"\"\n            }\n        ]\n    },\n    {\n        \"verdicts\": [\n            {\n                \"statement\": \"Ahab had purposely sailed upon the present voyage with the one only and all-engrossing object of hunting the White Whale.\",\n                \"verdict\": \"yes},{\",\n                \"reason\": null\n            }\n        ]\n    },\n    {\n        \"verdicts\": [\n            {\n                \"statement\": \"That captain was Ahab.\",\n                \"verdict\": \"yes},{\",\n                \"reason\": null\n            }\n        ]\n    },\n    {\n        \"verdicts\": [\n            {\n                \"statement\": \"Ahab had cherished a wild vindictiveness against the whale\",\n                \"verdict\": \"yes\",\n                \"reason\": null\n            },\n            {\n                \"statement\": \"he at last came to identify with him, not only all his bodily woes, but all his intellectual and spiritual exasperations\",\n                \"verdict\": \"yes\",\n                \"reason\": null\n            },\n            {\n                \"statement\": \"The White Whale swam\",\n                \"verdict\": \"no\",\n                \"reason\": \"The retrieval context contained the information 'The White Whale swam' which has nothing to do with the captain's obsession or hunting.\"\n            }\n        ]\n    }\n]"}], "runDuration": 30.558992100006435, "evaluationCost": 0.0056565, "order": 0, "additionalMetadata": {"golden_name": "Moby Dick"}}, {"name": "test_gutenberg_rag_answer_relevancy[test_case1]", "input": "Which character hires Holmes to investigate the strange advertisement seeking red-headed men?", "actualOutput": "I dont know based on the given context.", "expectedOutput": "Jabez Wilson", "retrievalContext": ["desire to see solved, I should strongly recommend you to come to my\nfriend, Mr. Sherlock Holmes, before you go to the official police.\u201d\n\u201cOh, I have heard of that fellow,\u201d answered my visitor, \u201cand I should\nbe very glad if he would take the matter up, though of course I must\nuse the official police as well. Would you give me an introduction to\nhim?\u201d", "place where our red-headed client carried on his business. Sherlock\nHolmes stopped in front of it with his head on one side and looked it\nall over, with his eyes shining brightly between puckered lids. Then he\nwalked slowly up the street, and then down again to the corner, still\nlooking keenly at the houses. Finally he returned to the pawnbroker\u2019s,", "save his blazing red head, and the expression of extreme chagrin and\ndiscontent upon his features.\nSherlock Holmes\u2019 quick eye took in my occupation, and he shook his head\nwith a smile as he noticed my questioning glances. \u201cBeyond the obvious\nfacts that he has at some time done manual labour, that he takes snuff,\nthat he is a Freemason, that he has been in China, and that he has done", "woman\u2019s wit. He used to make merry over the cleverness of women, but I\nhave not heard him do it of late. And when he speaks of Irene Adler, or\nwhen he refers to her photograph, it is always under the honourable\ntitle of _the_ woman.\nII. THE RED-HEADED LEAGUE\n I had called upon my friend, Mr. Sherlock Holmes, one day in the\n autumn of last year and found him in deep conversation with a very"], "success": false, "metricsData": [{"name": "Contextual Precision", "threshold": 0.675, "success": false, "score": 0.6388888888888888, "reason": "The score is 0.64 because the top retrieval context (Rank 1) is irrelevant: 'It mentions 'to come to my friend, Mr. Sherlock Holmes' but contains no reference to the red-headed league or the advertisement, so it doesn't point toward the client Jabez Wilson.' However, Rank 2-4 are relevant to the Red-Headed League case: Rank 2 includes 'the red-headed client' and 'pawnbroker\u2019s' ... 'place where our red-headed client carried on his business. Sherlock Holmes stopped in front of it... and then to the corner, still looking keenly at the houses. Finally he returned to the pawnbroker\u2019s,' which directly ties to the case. Rank 3 includes 'save his blazing red head' and 'Holmes\u2019 quick eye took in my occupation... that he has done' which aligns with identifying the red-headed client involved in the case. Rank 4 explicitly references the case with the heading 'II. THE RED-HEADED LEAGUE' and opening lines like 'I had called upon my friend, Mr. Sherlock Holmes,' situating the Red-Headed League investigation relevant to identifying the client.", "strictMode": false, "evaluationModel": "Azure OpenAI (gpt-5-nano)", "evaluationCost": 0.0021715000000000003, "verboseLogs": "Verdicts:\n[\n    {\n        \"verdict\": \"no\",\n        \"reason\": \"It mentions 'to come to my friend, Mr. Sherlock Holmes' but contains no reference to the red-headed league or the advertisement, so it doesn't point toward the client Jabez Wilson.\"\n    },\n    {\n        \"verdict\": \"yes\",\n        \"reason\": \"It references 'the red-headed client' and 'pawnbroker\\u2019s' as part of the scene: 'place where our red-headed client carried on his business. Sherlock Holmes stopped in front of it... and then to the corner, still looking keenly at the houses. Finally he returned to the pawnbroker\\u2019s,' which directly ties to the case.\"\n    },\n    {\n        \"verdict\": \"yes\",\n        \"reason\": \"It mentions the client with 'save his blazing red head' and Holmes\\u2019 examination: 'Holmes\\u2019 quick eye took in my occupation... that he has done' which aligns with identifying the red-headed client involved in the case.\"\n    },\n    {\n        \"verdict\": \"yes\",\n        \"reason\": \"It explicitly references the case with the heading 'II. THE RED-HEADED LEAGUE' and opening lines like 'I had called upon my friend, Mr. Sherlock Holmes,' situating the Red-Headed League investigation relevant to identifying the client.\"\n    }\n]"}, {"name": "Contextual Relevancy", "threshold": 0.675, "success": false, "score": 0.35294117647058826, "reason": "The score is 0.35 because the context includes a hint of a red-headed hirer ('place where our red-headed client carried on his business'), but irrelevancy notes the hireer is not identified: The statement only says 'desire to see solved, I should strongly recommend you to come to my friend, Mr. Sherlock Holmes, before you go to the official police' and does not identify the client who hires Holmes. The visitor lines 'The visitor asks for an introduction to Holmes' and 'The visitor says they would be very glad if Holmes would take the matter up' show inquiry, not identification.", "strictMode": false, "evaluationModel": "Azure OpenAI (gpt-5-nano)", "evaluationCost": 0.009155300000000002, "verboseLogs": "Verdicts:\n[\n    {\n        \"verdicts\": [\n            {\n                \"statement\": \"A person recommends consulting Mr. Sherlock Holmes before the official police.\",\n                \"verdict\": \"no\",\n                \"reason\": \"The statement only says 'desire to see solved, I should strongly recommend you to come to my friend, Mr. Sherlock Holmes, before you go to the official police' and does not identify the client who hires Holmes.\"\n            },\n            {\n                \"statement\": \"The visitor says they would be very glad if Holmes would take the matter up, though they must use the official police as well.\",\n                \"verdict\": \"yes\",\n                \"reason\": null\n            },\n            {\n                \"statement\": \"The visitor asks for an introduction to Holmes.\",\n                \"verdict\": \"yes\",\n                \"reason\": null\n            }\n        ]\n    },\n    {\n        \"verdicts\": [\n            {\n                \"statement\": \"place where our red-headed client carried on his business.\",\n                \"verdict\": \"yes\",\n                \"reason\": null\n            },\n            {\n                \"statement\": \"Sherlock Holmes stopped in front of it with his head on one side and looked it all over, with his eyes shining brightly between puckered lids.\",\n                \"verdict\": \"yes\",\n                \"reason\": null\n            },\n            {\n                \"statement\": \"Then he walked slowly up the street, and then down again to the corner, still looking keenly at the houses.\",\n                \"verdict\": \"yes\",\n                \"reason\": null\n            },\n            {\n                \"statement\": \"Finally he returned to the pawnbroker\\u2019s,\",\n                \"verdict\": \"yes\",\n                \"reason\": null\n            }\n        ]\n    },\n    {\n        \"verdicts\": [\n            {\n                \"statement\": \"save his blazing red head, and the expression of extreme chagrin and discontent upon his features.\",\n                \"verdict\": \"no\",\n                \"reason\": \"The statement discusses a red-headed subject and their expression, not who hires Holmes. Quoted fragment: 'save his blazing red head'.\"\n            },\n            {\n                \"statement\": \"Sherlock Holmes\\u2019 quick eye took in my occupation, and he shook his head with a smile as he noticed my questioning glances.\",\n                \"verdict\": \"no\",\n                \"reason\": \"The statement concerns Holmes and the narrator's occupation, not the hireer. Quoted fragment: 'my occupation'.\"\n            },\n            {\n                \"statement\": \"Beyond the obvious facts that he has at some time done manual labour, that he takes snuff, that he is a Freemason, that he has been in China, and that he has done\",\n                \"verdict\": \"no\",\n                \"reason\": \"It is a description of presumed traits of a person, not about who hires Holmes. Quoted fragment: 'Beyond the obvious facts' and 'manual labour'.\"\n            },\n            {\n                \"statement\": \"that he has at some time done manual labour.\",\n                \"verdict\": \"no\",\n                \"reason\": \"This describes a past activity, not the hireer. Quoted fragment: 'manual labour'.\"\n            },\n            {\n                \"statement\": \"that he takes snuff.\",\n                \"verdict\": \"no\",\n                \"reason\": \"Again, describes a trait, not the hireer. Quoted fragment: 'takes snuff'.\"\n            },\n            {\n                \"statement\": \"that he is a Freemason.\",\n                \"verdict\": \"no\",\n                \"reason\": \"Trait description, not about who hires Holmes. Quoted fragment: 'Freemason'.\"\n            },\n            {\n                \"statement\": \"that he has been in China.\",\n                \"verdict\": \"no\",\n                \"reason\": \"Trait/location, not about hireer. Quoted fragment: 'been in China'.\"\n            }\n        ]\n    },\n    {\n        \"verdicts\": [\n            {\n                \"statement\": \"woman\\u2019s wit. He used to make merry over the cleverness of women, but I have not heard him do it of late. And when he speaks of Irene Adler, or when he refers to her photograph, it is always under the honourable title of _the_ woman.\",\n                \"verdict\": \"no\",\n                \"reason\": \"The context contains information about Irene Adler and 'the woman' but provides no information about who hires Holmes for the Red-Headed League.\"\n            },\n            {\n                \"statement\": \"II. THE RED-HEADED LEAGUE\",\n                \"verdict\": \"no\",\n                \"reason\": \"The context only provides the heading and does not mention the client who hires Holmes.\"\n            },\n            {\n                \"statement\": \"I had called upon my friend, Mr. Sherlock Holmes, one day in the autumn of last year and found him in deep conversation with a very\",\n                \"verdict\": \"no\",\n                \"reason\": \"The sentence describes Holmes but does not identify who hires him for the red-headed advertisement.\"\n            }\n        ]\n    }\n]"}], "runDuration": 80.09874810000474, "evaluationCost": 0.011326800000000001, "order": 1, "additionalMetadata": {"golden_name": "The Adventures of Sherlock Holmes"}}], "conversationalTestCases": [], "metricsScores": [{"metric": "Contextual Precision", "scores": [1.0, 0.6388888888888888], "passes": 1, "fails": 1, "errors": 0}, {"metric": "Contextual Relevancy", "scores": [0.25, 0.35294117647058826], "passes": 0, "fails": 2, "errors": 0}], "testPassed": 0, "testFailed": 2, "runDuration": 586.9119053999893, "evaluationCost": 0.0169833}}